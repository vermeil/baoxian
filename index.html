<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>根据工伤保险名单查询</title>
</head>
    <script src="https://code.jquery.com/jquery-3.0.0.min.js"></script>
    <script src="jquery-3.0.0.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <style>
        .content{
            float: left;
            width: calc(100% - 50px);
            min-height:500px;
            margin:15px 30px;
            padding:20px;
            box-shadow:5px 5px 10px rgb(176, 167, 167);
            border-radius:5px;
            transition:all 0.6s;
        }
        .content:hover{
            border-radius:15px;
            box-shadow:5px 5px 25px rgb(121,121,128);
        }
        .chaxun ,.textarea_div{
            float:left;
            width: 30%;
        }
        .textarea_div textarea{
            display: inline-block;
            float:left;
            height: 520px;
            width:calc(50% - 20px);
        }
        .textarea_div .p_text{
            float:left;
            line-height:520px;
            margin:0 10px;
        }
        #inp{
            float: left;
            width: 150px;
            margin-right: 5px;
        }
        .btn{
            float: left;
            margin-right:10px;
        }
        .cx{
            width: 70%;
            float:left;
        }
        #table{
            width:66%;
            margin:10px 2%;
            float:left;
        }
        .head tr{
            margin-bottom: 15px;
            padding-bottom: 25px;
            height: 50px;
        }
        .btn_clear{
            float: none;
            margin-left:111px;
        }
        .color_weight{
            font-weight:700;
        }
        .color_blue{
            color:#0b5fdb;
        }
        .bottom_text{
            text-align: center;
        }
        .td_shenfen input{
            width: 200px !important;
        }
        .td_call input{
            width: 150px !important;
        }
        .td_name input{
            width: 100px !important;
        }
        .td_call , .th_call{
            display: none;
        }
    </style>
<body>
    <div class="content">
    <div class="textarea_div">
    <div class="btn-group" role="group" >
      <button type="button" class="btn btn-default" id="gs">工伤保险</button>
      <button type="button" class="btn btn-default" id="yl">养老保险（未参保工伤保险）</button>
    </div>
        <p> <span>右侧对比左侧库</span>
            <button type="button" class="btn btn_clear btn-default">清空右文本</button>
        </p>
       <textarea type="text" id="obj_text"  class="form-control" disabled ></textarea>
       <p class="p_text">→</p>
       <textarea type="text" id="obj_text1"  class="form-control"></textarea>
    </div>
    <div class="cx">
        <button type="button" class="btn btn0 btn-primary">取重查询</button>
        <button type="button" class="btn btn1 btn-default">去重查询</button>
        <div class="chaxun">
            <input type="text"  class="form-control"  name="" value="" id="inp"  placeholder="姓名 or 身份证号">
            <button type="button" class="button btn2 btn btn-success">查询</button>
        </div>
        <button type="button" class="btn btn-link list1">序号</button>
        <button type="button" class="btn btn-link list2">姓名</button>
        <button type="button" class="btn btn-link list4">身份证</button>
        <button type="button" class="btn btn-link list4_1">电话</button>
        <button type="button" class="btn btn-link list3">性别</button>
        <button type="button" class="btn btn-link list5">参加工作日期</button>
        <button type="button" class="btn btn-link list6">学历</button>
    </div>
        <table id="table">
            <thead class="head">
            </thead>
            <tbody class="text">
            </tbody>
        </table>
    </div>
    <p class="bottom_text">
        左侧文本框使用<span class="color_blue on_flag">[工伤保险人员名单]</span>作为数据库 <br />
        在右侧文本框输入（推荐复制Excel或者Word 查询姓名）可以用来筛选与库重复的数据<span class="color_blue">[取重查询]</span>，或者不包含在库的名字<span  class="color_weight"> [去重查询]</span><br />
    </p>
    <p class="bottom_text bottom_text_null">
        <br /><span class="color_blue">公司基本信息</span>
        <br />企业名称： 河南民基建设工程有限公司
        <br />统一社会信用代码： 9141142117517183X4
        <br />企业注册地： 河南省- 商丘市- 民权县
        <br />经济类型： 有限责任公司（其他）
        <br />成立日期：1951 or 2001
        <br />企业营业地址：民权县产业集聚区（工业大道东段北侧）
        <br />企业营业地址邮编： 476800
        <br />企业法定代表人： 孟庆忠
        <br /><br /><span class="color_blue">有账户的相关网站</span>
        <br />P1
        <br />民权县广涛建筑劳动有限公司
        <br />全国企业信用信息公示系统
        <br />2-3  ~15
        <br />河南政务服务网
        <br />4
        <br />民基公司邮箱
        <br />河南民基宁夏分公司
        <br />民权县住建局邮箱
        <br />商丘市公共资源交易中心
        <br />5
        <br />民权县网上工伤党员登录
        <br />*价师注册管理系统
        <br />北京市住房和域*建设服务
        <br />最高人民法院诉讼网
        <br />6
        <br />中国建设工程造价管理协会会员服务系统
        <br />企业薪资调查填报系统
        <br />7  ~8~14~17
        <br />二级建造师继续教育
        <br />一级建造师报名
        <br />河南省建筑市场监管公共服务平台
        <br />8
        <br />二级建造师继续教育
        <br />河南建筑业协会
        <br />9
        <br />学习乐园App
        <br />河南省应急资源普查系统
        <br />登录注册身份验证
        <br />河南政法服务网
        <br />10 ~16
        <br />社保账户
        <br />11
        <br />建造师注册管理系统
        <br />河南省职称管理平台
        <br />12-13 ~16
        <br />商丘市养老保险中心
        <br />河南省企业登记会程电子服务平台
        <br />14  ~7
        <br />二级建造师继续教育
        <br />资质动态考核 出生诚信证明
        <br />15  ~2
        <br />国家政务服务平台
        <br />16
        <br />商丘市企业养老保险中心  单位查询 个人查询
        <br />17
        <br />建筑施工企业安管人员培训报名系统
        <br />学达云 微信认证
        <br />18
        <br />双重预防体系安全管理平台
        <br />省工会 → 商丘市总工会
        <br />豫工惠App
    </p>
</body>
<script>

    $(function(){
       $('#gs').click()
    })
    let data1 = {
        name:[
       "孟庆忠","吴孝生","张红丽","刘明","吴艳","刘萍","高晓辉","朱瑞英","左鹏飞","马明剑","朱群涛","程广磊","李庆杰","段保伍","刘芳","朱明明","许雪艳","马炳晨","黄河","李东","朱金涛","李中卫","吴格伟","李强","陈秀志","吴亚伟","朱贵庆","高红香","朱秀正","张起康","孟海波","朱建忠","陈大松","孙洪军","朱曼","李中华","曹冰冰","张冬媛","李月霞","骆慧芳","高鹏辉","李新建","张宁","郑心超","陈鹤","丁明","胡改菊","贾建强","蒋贵华","李凤娇","李建勇","李良鹏","刘丽","刘永杰","吕文军","孟冰","石秀峰","王常磊","王东峰","王虎","王淞","王喜民","吴连营","吴茂林","肖建峰","杨志英","张朝龙","张天吴","朱传义","朱红丽","朱盼盼","左文宇","王光军","张雪花","伏自杰","孟庆华","孔祥林","吴永林","朱建民"
        ], //姓名
        sex :[
        1,1,2,1,2,2,1,2,1,1,1,1,1,1,2,1,2,1,1,1,1,1,1,1,1,1,1,2,1,1,1,1,1,1,2,1,1,2,2,2,1,1,1,1,1,1,2,1,1,2,1,1,2,1,1,1,2,1,1,1,1,1,1,1,1,1,1,2,1,2,2,2,1,2,1,2,1,1,1
        ], //性别 1男 2女
        shenfen : [
            "412323196810290051","412323196402150076","412323197603060063","412323196512270052","412323197603180049","412323197906180329","412301198102204010","412323197010280028","411421199011200090","412323198303020136","411421198709100170","410922198402062758","41232319790619021X","412323197403240051","41142119871005284X","411421199109062857","411421198608120826","411421198606262839","411421198910260037","412323197411290913","411421199009123157","412323198201020039","411421198912281210","412323198005130011","410727196810105018","412323198302100054","412323197712070017","411421198810170309","411421199008280054","412323196406060035","412323197204070037","412323196610030132","412323196603255237","412323197302280214","411421199001060040","412322198308131832","411421199002020016","412801198811240847","412322197903291844","410581198910209101","411421198919160191","412323197206160079","411421199206050014","412323196903170032","412323197305020055","412323197208150050","412323197811080085","412323196803030016","320322198610124437","412323197101020280","412323197809177216","41232319791005005X","412323197801100062","412323197202220134","41232319620920241X","411421199002287837","412323197808100102","411421199008024034","412301197801152518","412323198303202837","513026197303054398","412323197701160092","412323197103271219","412323196910041212","412323197510020214","420111197006185793","412323197407160112","411421198812254864","412323196410010110","412323197105010047","411421198904080064","411421199202160240","412323197711080037","411421199201187644","412323196711210036","412323197803120024","412323196306080012","41232319730901121X","412323195708260038"
        ], //身份证
        call:[
       "13837020222","13837057759","null","15137012589","13608642353","13569350381","15517096666","15836410881","18738074567","13837031268","18637055598","18137002768","13803976318","18737093733","15903708727","18638410667","15993406117","18623877985","15837046292","13937059669","13353605111","15136095444","13353627882","13017697937","null","null","null","13087026090","null","null","null","null","null","null","18637056667","null","null","null","null","null","null","null","15037060791","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","null","19839911732","null","null","18838227614","null","null","null","null","15713603596"
        ], //电话
        canjia : [
            "198912","198412","199305","199505","199305","199909","200402","198808","200501","200501","201001","201001","199305","201101","201106","201106","201106","201207","201210","201501","201604","201604","201604","199512","201310","199912","199305","201501","201501","199611","199305","199412","201501","199305","201001","201604","201701","201701","201701","201701","200812","199312","201905","198612","199001","199305","199412","198912","201707","199305","201707","201308","199312","198612","199512","201106","200107","201604","199508","201709","201604","201904","199501","199312","199312","201707","200007","202002","198212","199305","201707","201501","199509","201202","199312","199506","198612","199501","工作日期和工伤保险未知"
        ],  //参加工作日期
        xueli : [
            31,41,41,31,31,41,31,41,41,31,41,21,31,31,31,41,31,21,31,31,41,31,41,21,31,31,31,41,31,31,31,41,31,31,41,41,31,21,21,41,41,41,21,41,41,41,31,31,21,31,21,41,31,31,31,41,41,31,21,41,41,41,41,31,31,21,31,41,31,41,21,31,41,31,31,31,41,31,31
        ]   //学历  //41中专    31大专    21本科
    }   //工伤参保人员 79
    let data2 = {
        name : ["康新适","朱广军","刘永建","朱晓燕","朱秀中","张常友","贾祖康","孙红军","葛卫华","吴海刚(离职)","王红霞(王霞)","高红林","马跃海(马保建)","许振营","孙献陆","朱海兵","朱群","朱传治","宋秀琴","王胜利"],
        sex : [1,1,1,2,1,1,1,1,1,2,1,1,1,1,1,2,1],//性别 1男 2女
        shenfen : ["412323197209160138",0,0,0,"412323196909122912",0,"412323198209212852","412323197302280214",0,"411421199002287837","412323740620002",0,"412323196503150032",0,0,0,"412323196404090011",0,0,"412301197101261019"],
        call : [ ],
        canjia : [ ],
        xueli : []//学历  //41中专    31大专    21本科
    }   //养老参保人员 97

    let obj = data1;
    let obj2 = {};
    $('#gs').on('click',()=>{
        obj = data1;
        $("#obj_text").text(obj.name)
    })
    $('#yl').on('click',()=>{
        obj = data2;
        $("#obj_text").text(obj.name)
    })
    $('.btn0').on('click',()=>{//取重
        rep($('#obj_text1'))

        let pnum = {
            name : [],
            sex : [],
            shenfen : [],
            call : [],
            canjia : [],
            xueli : []
        }
        var num = 1;
        $('.text , .head').empty()
        $('.head').append(`
            <tr>
                <th class="th_num">序号</th>
                <th class="th_name">姓名</th>
                <th class="th_shenfen">身份证</th>
                <th class="th_call">电话</th>
                <th class="th_sex">性别</th>
                <th class="th_canjia">参加工作日期</th>
                <th class="th_xueli">学历</th>
            </tr>
        `)
        // for (let i = obj.name.length - 1; i >= 0; i--) {
        for (var i = 0;obj.name.length > i; i++) {
            for (let j = obj2.name.length - 1; j >= 0; j--) {
                if(obj.name[i] == obj2.name[j]){
                    pnum.name.unshift(obj.name[i]);
                    pnum.sex.unshift(obj.sex[i]);
                    pnum.shenfen.unshift(obj.shenfen[i]);
                    pnum.call.unshift(obj.call[i]);
                    pnum.canjia.unshift(obj.canjia[i]);
                    pnum.xueli.unshift(obj.xueli[i]);

                    var sex = (obj.sex[i] === 1)? '男' :'女';
                    var xueli = obj.xueli[i]
                    if(xueli == 31){
                        xueli = '大专'
                    }else if(xueli == 21){
                        xueli = '本科'
                    }else if(xueli == 41){
                        xueli = '中专'
                    }
                   $('.text').append(`
                        <tr>
                            <td class="td_num">${num++}</td>
                            <td class="td_name"><input type="text" class="form-control" value=${obj.name[i]}></td>
                            <td class="td_shenfen"><input type="text" class="form-control" value=${obj.shenfen[i]}></td>
                            <td class="td_call"><input type="text" class="form-control" value=${obj.call[i]}></td>
                            <td class="td_sex">${sex}</td>
                            <td class="td_canjia">${obj.canjia[i]}</td>
                            <td class="th_xueli">${xueli}</td>
                        </tr>
                    `)
                    break;
                }
            }
       }
        // console.log(pnum)
        // console.log('人数姓名: '+pnum.name)
        // console.log('在库的人数：'+pnum.name.length)
    })

    $('.btn1').on('click',()=>{ //去重
        rep($('#obj_text1'))

        var num = 1;
        let pnum = []; // 取重以后人数姓名

        $('.text , .head').empty()
        $('.head').append(`
            <tr>
                <th class="th_num">序号</th>
                <th class="th_name">姓名</th>
            </tr>
        `)
        for (let i = obj.name.length - 1; i >= 0; i--) {
            for (let j = obj2.name.length - 1; j >= 0; j--) {
                if(obj.name[i] == obj2.name[j] ){
                    pnum.push(obj2.name[j]);
                    break;
                }
            };
       }
        let pnum2 = []
        for (var i = obj2.name.length - 1; i >= 0; i--) {
             pnum2.unshift(obj2.name[i])
        };
        for (let i = pnum.length - 1; i >= 0; i--) {
            for (let j = obj2.name.length - 1; j >= 0; j--) {
                if(pnum[i] == pnum2[j]){
                    pnum2.splice(j, 1)
                    break;
                }
            }
        }

        // for (var i = pnum2.length - 1; i >= 0; i--) {
        for (var i = 0;pnum2.length > i; i++) {
            if($.trim(pnum2[i])){
                $('.text').append(`
                    <tr>
                        <td class="td_num">${num++}</td>
                        <td class="td_name">${pnum2[i]}</td>
                    </tr>
                `)
            }
        };

        // console.log('人数姓名: '+pnum2)
        // console.log('不在库的人数:'+pnum2.length )
    })

    $('.btn2').on('click',function_chaxun)
    //回车
    $(document).on('keyup', function(event) {
        if (event.keyCode == "13") {
            // //去空格
            // rep($('#obj_text'))
            // rep($('#obj_text1'))
            //回车执行查询
            function_chaxun();
        }
    });
    //查询
    function function_chaxun () {
        var num = 1;
        $('.text , .head').empty()
        $('.head').append(`
            <tr>
                <th class="th_num">序号</th>
                <th class="th_name">姓名</th>
                <th class="th_shenfen">身份证</th>
                <th class="th_call">电话</th>
                <th class="th_sex">性别</th>
                <th class="th_canjia">参加工作日期</th>
                <th class="th_xueli">学历</th>
            </tr>
        `)

        for (var i = obj.name.length - 1; i >= 0; i--) {

            var sex = (obj.sex[i] === 1)? '男' :'女';
            var xueli = obj.xueli[i]
            if(xueli == 31){
                xueli = '大专'
            }else if(xueli == 21){
                xueli = '本科'
            }else if(xueli == 41){
                xueli = '中专'
            }
            if( obj.name[i].indexOf($.trim($('#inp').val()))!= -1
                || obj.shenfen[i] == $.trim($('#inp').val())
                || obj.canjia[i] == $.trim($('#inp').val())
                || sex == $.trim($('#inp').val())
                || xueli == $.trim($('#inp').val())
             ){
                   $('.text').append(`
                        <tr>
                            <td class="td_num">${num++}</td>
                            <td class="td_name"><input type="text" class="form-control" value=${obj.name[i]}></td>
                            <td class="td_shenfen"><input type="text" class="form-control" value=${obj.shenfen[i]}></td>
                            <td class="td_call"><input type="text" class="form-control" value=${obj.call[i]}></td>
                            <td class="td_sex">${sex}</td>
                            <td class="td_canjia">${obj.canjia[i]}</td>
                            <td class="td_xueli">${xueli}</td>
                        </tr>
                    `)
            }
        };
        if($('#inp').val() == ''){
            $('.btn0').click()
        }
    }

    $('.list1').on('click',()=>{//序号
        $('.td_num , .th_num').remove()
    })
    $('.list2').on('click',()=>{//姓名
        $('.td_name , .th_name').remove()
    })
    $('.list3').on('click',()=>{//性别
        $('.td_sex , .th_sex').remove()
    })
    $('.list4').on('click',()=>{//身份
        $('.td_shenfen , .th_shenfen').remove()
    })
    $('.list4_1').on('click',()=>{//电话
        $('.td_call , .th_call').remove()
    })
    $('.list5').on('click',()=>{//参加工作日期
        $('.td_canjia , .th_canjia').remove()
    })
    $('.list6').on('click',()=>{//学历
        $('.td_xueli , .th_xueli').remove()
    })

    $('.on_flag').on('click',()=>{//学历
        $('.td_call , .th_call').show()
    })
    //去空格
    function rep (_this){
        let val = _this.val()
        val = val.split(/[\s\,\，\r\n]+/);
        for (var i = val.length - 1; i >= 0; i--) {
            val[i] = $.trim(val[i])
        }
        obj2.name = val
        // console.log(obj2.name)
    }

    //清空右
    $('.btn_clear').on('click',function(){
        $('#obj_text1').val('')
    })
</script>
</html>

